{% extends "layout.html" %}

{% block title %}
    Finder
{% endblock %}

{% block aboveNav %}
<div class="container" style="text-align: center; font-weight: bolder;">
	<h1 class="text-center">
		Find a Conference
	</h1>
</div>
{% endblock %}

{% block main %}
<div class="textFormContainer">
    <form id="searchForm" name="searchForm" action="/find-conference" method="POST">
        <div class="form-group" >
            <h3>Find a Conference: </h3>
            <input autocomplete="on" autofocus class="form-control" name="conferenceSearch" placeholder="Search here..." type="text">
        </div>
        <p></p>
        <table width="100%">
            <tr>
                <td>
                    <button class="btn btn-primary" name="submitButton" type="submit" value="1"><h5>Search</h5></button> 
                </td>
                <td style="left:  auto; right: 25px;" align="right">
                    <button class="btn btn-danger" name="submitButton" type="submit" value="2"><h5>Show All</h5></button>
                </td>
            </tr>
        </table>        
    </form>
</div>
{% if confFound %}
    <div class="textFormContainer">
        <h3>List of Conferences:</h3>
        <table class="table table-striped sortable" id="sortTable">
            <thead>
                <td>
                    Conference Name
                </td>
                <td>
                    Register Deadline
                </td>
                <td>
                    Paper Review Deadline
                </td>
                <td>
                    Start Date
                </td>
                <td>
                    End Date
                </td>
                <td>
                    Register Here!
                </td>
            </thead>
            {% for conference in confFound %}
            <tr>
                <td style="color: yellow;">
                    {{ conference['confName'] }}<br>{{ conference['confURL'] }}
                </td>
                <td>
                    {{ conference['delegSignUpDeadline']|format_date }}
                </td>
                <td>
                    {{ conference['paperFinalisationDate']|format_date }}
                </td>
                <td>
                    {{ conference['confStart']|format_date }}
                </td>
                <td>
                    {{ conference['confEnd']|format_date }}
                </td>
                <td>
                    {% if conference['registered'] == False %}
                    <!-- Register Button -->
                    <form id="registration-form" method="POST" action="{{ url_for('views.registerConference') }}">
                        <input type="hidden" name="conferenceId" value="{{ conference['confId'] }}">
                        <button class="btn btn-success" type="submit">Register</button>
                    </form>
                    {% else %}
                    <p>
                        Already registered.
                    </p>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </table>
    </div>
{% endif %}
{% endblock %}